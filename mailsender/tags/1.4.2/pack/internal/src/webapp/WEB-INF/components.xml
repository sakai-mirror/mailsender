<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
	"http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
	<bean id="org.sakaiproject.mailsender.logic.ComposeLogic"
		class="org.sakaiproject.mailsender.logic.impl.CachingComposeLogicImpl"
		init-method="init" destroy-method="destroy">
		<property name="externalLogic" ref="org.sakaiproject.mailsender.logic.ExternalLogic" />
		<property name="toolManager" ref="org.sakaiproject.tool.api.ToolManager" />
		<property name="siteService" ref="org.sakaiproject.site.api.SiteService" />
		<property name="authzGroupService" ref="org.sakaiproject.authz.api.AuthzGroupService" />
		<property name="userDirectoryService" ref="org.sakaiproject.user.api.UserDirectoryService" />
		<property name="memoryService" ref="org.sakaiproject.memory.api.MemoryService" />
	</bean>

	<bean id="org.sakaiproject.mailsender.logic.ConfigLogic"
		class="org.sakaiproject.mailsender.logic.impl.ConfigLogicImpl">
		<property name="toolManager" ref="org.sakaiproject.tool.api.ToolManager" />
		<property name="serverConfigurationService" ref="org.sakaiproject.component.api.ServerConfigurationService" />
		<property name="externalLogic" ref="org.sakaiproject.mailsender.logic.ExternalLogic" />
	</bean>

	<bean id="org.sakaiproject.mailsender.logic.ExternalLogic"
			class="org.sakaiproject.mailsender.logic.impl.ExternalLogicBuiltinImpl">
		<property name="functionManager" ref="org.sakaiproject.authz.api.FunctionManager" />
		<property name="securityService" ref="org.sakaiproject.authz.api.SecurityService" />
		<property name="sessionManager" ref="org.sakaiproject.tool.api.SessionManager" />
		<property name="siteService" ref="org.sakaiproject.site.api.SiteService" />
		<property name="toolManager" ref="org.sakaiproject.tool.api.ToolManager" />
		<property name="userDirectoryService" ref="org.sakaiproject.user.api.UserDirectoryService" />
		<property name="mailArchiveService" ref="org.sakaiproject.mailarchive.api.MailArchiveService" />

		<property name="serverConfigurationService" ref="org.sakaiproject.component.api.ServerConfigurationService" />
		<property name="configLogic" ref="org.sakaiproject.mailsender.logic.ConfigLogic" />
	</bean>

	<!--
	This bean uses the email service for sending email rather than the built in email service.
	This can only be used if the email service provided supports attachments.  This became available
	around the time of K1 1.0.
	-->
	<!--
	<bean id="org.sakaiproject.mailsender.logic.ExternalLogic"
			class="org.sakaiproject.mailsender.logic.impl.ExternalLogicEmailServiceImpl"
			init-method="init">
		<property name="functionManager" ref="org.sakaiproject.authz.api.FunctionManager" />
		<property name="securityService" ref="org.sakaiproject.authz.api.SecurityService" />
		<property name="sessionManager" ref="org.sakaiproject.tool.api.SessionManager" />
		<property name="siteService" ref="org.sakaiproject.site.api.SiteService" />
		<property name="toolManager" ref="org.sakaiproject.tool.api.ToolManager" />
		<property name="userDirectoryService" ref="org.sakaiproject.user.api.UserDirectoryService" />
		<property name="mailArchiveService" ref="org.sakaiproject.mailarchive.api.MailArchiveService" />

		<property name="emailService" ref="org.sakaiproject.email.api.EmailService" />
	</bean>
	-->

	<bean id="org.sakaiproject.mailsender.logic.ComposeLogic.groupsCache"
		class="org.springframework.cache.ehcache.EhCacheFactoryBean">
		<property name="cacheManager">
			<ref bean="org.sakaiproject.memory.api.MemoryService.cacheManager"/>
		</property>
		<property name="cacheName" value="org.sakaiproject.mailsender.logic.ComposeLogic.groupsCache"/>
		<property name="maxElementsInMemory" value="0"/>
		<property name="timeToIdle" value="120"/>
		<property name="timeToLive" value="120"/>
	</bean>
</beans>